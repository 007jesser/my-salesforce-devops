trigger:
  branches:
    include:
      - dev
      - main

pool:
  name: Default   # Capital D

steps:
- script: echo "Running on self-hosted agent!"

- task: NodeTool@0
  inputs:
    versionSpec: '18.x'
  displayName: 'Install Node.js'

- script: |
    npm install --global @salesforce/cli
    sf --version
  displayName: 'Install Salesforce CLI'

- checkout: self

- script: |
    sf org create scratch --definition-file config/project-scratch-def.json --alias ci-scratch-org --set-default
  displayName: 'Create Scratch Org'
